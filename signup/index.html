---
layout: default
title: Sign Up
---
<h2>Create your account</h2>

<!-- TOS inline (scrollable box) -->
<div style="max-height: 280px; overflow:auto; border:1px solid #ddd; padding:12px; border-radius:6px; margin-bottom:12px;">
  {% include tos.html %}
</div>

<label style="display:block; margin:8px 0;">
  <input type="checkbox" id="agreeBox">
  I have read and agree to the Terms of Service.
  <a href="/tos/" target="_blank" rel="noopener">View full TOS</a>
</label>

<form id="signupForm" onsubmit="return handleSignupSubmit(event)" novalidate>
  <input type="hidden" name="tos_version" value="2025-08-15" id="tosVersion">
  <div style="margin:8px 0;">
    <label>Email<br><input type="email" name="email" required></label>
  </div>
  <div style="margin:8px 0;">
    <label>Password<br><input type="password" name="password" required minlength="8"></label>
  </div>
  <button id="submitBtn" type="submit" disabled>Create account</button>
</form>

<script>
  // gate submit button on TOS checkbox
  const agreeBox = document.getElementById('agreeBox');
  const submitBtn = document.getElementById('submitBtn');
  const tosVersion = document.getElementById('tosVersion')?.value || 'unknown';

  agreeBox.addEventListener('change', () => {
    submitBtn.disabled = !agreeBox.checked;
  });

  function handleSignupSubmit(e){
    if(!agreeBox.checked){
      alert('Please agree to the Terms of Service to continue.');
      return false;
    }
    // lightweight client-side log (until backend exists)
    try {
      const record = {
        event: 'tos_agreed',
        tsUtc: new Date().toISOString(),
        tosVersion,
        ua: navigator.userAgent
      };
      localStorage.setItem('td_tos_log', JSON.stringify(record));
    } catch(_) {}

    // TODO: replace with real signup + backend logging
    // For now, show a confirmation and link home.
    e.preventDefault();
    window.location.href = '/signup/thanks/';
    return false;
  }
</script>
